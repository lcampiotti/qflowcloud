  v5.2-v5.5 — Qflow Cloud        

*   [Qflow](https://qflowbpm.com/es/)
*   [Foro](https://forum.qflowbpm.com/)
*   [Centro de Ayuda](https://qflowbpm.com/es/centro-de-ayuda/)
*   [Contáctanos](https://qflowbpm.com/es/contacto/)

[Qflow](index.html)

Cloud (latest) 5.5 OnPremise (latest) 5.2 OnPremise 5.1.1 OnPremise

English Español

selectElement('versionSelect', getVersion()); selectElement('languageSelect', getLanguage()); function selectElement(id, valueToSelect) { let element = document.getElementById(id); element.value = valueToSelect; } function getLanguage() { if (window.location.href.includes('/es/')) { return '/es/'; } else { return '/en/'; } } function getVersion() { if (window.location.href.includes('/qflowcloud/')) { return '/qflowcloud/'; } else if (window.location.href.includes('/qflow5\_1\_1/')) { return '/qflow5\_1\_1/'; } else if (window.location.href.includes('/qflow5\_2/')) { return '/qflow5\_2/'; } else { return '/qflow5\_5/'; } } function redirectToSite(url) { var http = new XMLHttpRequest(); http.onreadystatechange = function() { if (http.readyState === 4) { if (http.status !== 404) { window.location.href = url; } else { window.location.href = url.replace(url.substr(url.lastIndexOf('/') + 1), 'index.html'); } } } http.open('HEAD', url, true); http.send(); }

  

Inicio

*   [Novedades](29-ReleaseNote.html)
*   [Introducción a Qflow](01-QflowIntroduction.html)
*   [Tutoriales](TutorialsIndex.html)
*   [Qflow Task](04-QflowTask.html)
*   [Qflow Design](15-QflowDesign.html)
*   [Qflow Team](18-QflowTeam.html)
*   [Qflow Admin](19-QflowAdmin.html)
*   [Consumo de Q-points](21-Q-pointsConsumption.html)
*   [Conectores](34-ConnectorsIndex.html)
*   [Desarrolladores](31-Development.html)

[Qflow](index.html)

*   [](index.html)
*   v5.2-v5.5

- - -

# v5.2-v5.5[](#v5-2-v5-5 "Link to this heading")

La migración de la versión 5.2 a la [versión 5.5](29.6-ReleaseNote5_5.html) del producto incluye los cambios de las versiones [5.3](29.4-ReleaseNote5_3.html) y [5.4](29.5-ReleaseNote5_4.html). Estas versiones fueron liberadas para la versión _Cloud_ del producto, y con la liberación de la versión 5.5, se incluyen sus cambios a la versión _OnPremise_ del producto.

## Consideraciones de migración desde Qflow 5.2[](#consideraciones-de-migracion-desde-qflow-5-2 "Link to this heading")

### Cambios en formularios personalizados[](#cambios-en-formularios-personalizados "Link to this heading")

**Métodos asincrónicos de formularios personalizados**

Muchos de los métodos usados para invocar acciones, como por ejemplo, obtener el formulario de inicio de un proceso, responder una tarea o editar un proceso fueron cambiados a métodos _asíncronos_, esto quiere decir que hay que hacer cambios en los formularios que los utilizan para que funcionen.

Advertencia

Dado estos cambios, es importante tener en cuenta que de acuerdo a como este implementado, los metodos pueden no dar errores a nivel de compilación. Los usuarios que desarrollan formularios pueden no percatarse de problemas, sin embargo, puede que ocurran efectos no deseados si no se agregan las instrucciones _await_ donde corresponde.

Puede ver estos cambios reflejados en la sección de controladores del manual de diseño de formularios personalizados.

**Soporte de inicio de procesos y tareas anónimas/externas en formularios personalizados**

Ahora es posible utilizar formularios personalizados en inicio o respuesta de tareas anónimas/externas. Para que sigan funcionando los formularios personalizados existentes en este tipo de acciones, tendrá que hacer modificaciones a los formularios de inicio de proceso y respuesta de tarea.

Lo primero que se debería hacer es actualizar el archivo ViewStart con los cambios necesarios para este tipo de formularios. Esto implica agregar la condición del nuevo layout, _CustomFormsGuestLayout_, a este archivo. Este archivo debe quedar de la siguiente manera:

> {
>     if (Qframework.Web.Mvc.SessionManagement.SessionManagerHelper.GetSessionManager<Qflow.Web.Mvc.SessionManagement.QflowSessionManager\>().IsGuest)
>     {
>         Layout \= "~/Views/Shared/\_CustomFormsGuestLayout.cshtml";
>     }
>     else if (Request.QueryString\["useEmptyLayout"\] \== null || Request.QueryString\["useEmptyLayout"\] !="True")
>     {
>         Layout \= "~/Views/Shared/\_CustomFormsLayout.cshtml";
>     }
>     else
>     {
>         Layout \= "~/Views/Shared/\_CustomFormsEmptyLayout.cshtml";
>     }
> }

Tanto para los formularios de inicio y respuesta, se debe incluir la referencia a la librería _Qflow.Mvc.Multitenancy_ en sus vistas. Podemos hacerlo agregando la siguiente línea a la lista de _usings_ que se encuentra al principio del archivo de la vista:

@using Qflow.Mvc.Multitenancy

Para las vistas de formularios de **inicio de proceso**, reemplazar lo siguiente:

@using (Html.BeginForm(null, null, new { templateId \= Model.TemplateId, useEmptyLayout \= Request.QueryString\["useEmptyLayout"\] },
FormMethod.Post, new { id \= "submitForm", enctype \= "multipart/form-data" }))

por el código a continuación:

@using (Html.BeginForm(null, null, new { templateId \= Model.TemplateId, useEmptyLayout \= Request.QueryString\["useEmptyLayout"\],
tenantId \= TenantResolver.GetRequestTenantIdOrDefault() }, FormMethod.Post, new { id \= "submitForm", enctype \= "multipart/form-data" }))

Para las vistas de formularios de **respuesta de tarea**, reemplazar lo siguiente:

if (Request.QueryString\["DisplayLinks"\] \== null || bool.Parse(Request.QueryString\["DisplayLinks"\]))
{
    ViewBag.Links \= ModelHelper.GetPageLinks("DisplayTask", Model.FlowId, Guid.Empty, Model.VersionId, Url);
}

por el código a continuación:

var isGuest \= Model is GuestTaskModel;
var displayLinks \= Request.QueryString\["DisplayLinks"\] \== null || bool.Parse(Request.QueryString\["DisplayLinks"\]);
if (!isGuest && displayLinks)
{
    ViewBag.Links \= ModelHelper.GetPageLinks("DisplayTask", Model.FlowId, Guid.Empty, Model.VersionId, Url);
}

Además, reemplazar:

@using (Html.BeginForm(null, null, new { flowId \= Model.FlowId, taskId \= Model.FlowStepId,
taskToId \= Model.FlowStepToId, useEmptyLayout \= Request.QueryString\["useEmptyLayout"\] }, FormMethod.Post,
new { id \= "submitForm", enctype \= "multipart/form-data" }))

por lo siguiente:

@using (Html.BeginForm(null, null, new { flowId \= Model.FlowId, taskId \= Model.FlowStepId,
taskToId \= Model.FlowStepToId, useEmptyLayout \= Request.QueryString\["useEmptyLayout"\],
tenantId \= TenantResolver.GetRequestTenantIdOrDefault() }, FormMethod.Post,
new { id \= "submitForm", enctype \= "multipart/form-data" }))

Para los formularios de respuesta de tarea, también debemos incluir el helper _QGuest_ en la vista de la siguiente manera:

@Html.QGuest(Request)

### Cambio de permiso «Administrar vínculos»[](#cambio-de-permiso-administrar-vinculos "Link to this heading")

Dado que en la versión 5.5 se quitó la funcionalidad de «Vínculos» de Qflow Task, reemplazandola por la funcionalidad de «Personalizar el menú lateral». Por lo tanto, se reemplazó también a nivel de instalación el permiso de «Administrar vínculos» por el nuevo permiso de «Administrar el menú lateral». Para aquellos ambientes en donde se use el sitio WebForms, este permiso tendrá que ser agregado nuevamente para que los usuarios puedan seguir usando la funcionalidad de «Vínculos» del sitio WebForms.

### Propiedades nulleables de objetos de configuración de cola de trabajo[](#propiedades-nulleables-de-objetos-de-configuracion-de-cola-de-trabajo "Link to this heading")

Las propiedades «ValidFrom» y «ValidTo» de los objetos _WorkQueueConfiguration_, que son retornados por métodos que devuelven información de nodos organizacionales en los [web services](20-WebServicesAPI.html), pasan a ser objetos nulleables, por lo que hay que tener en cuenta esta consideración para aquellos usuarios que los utilizan.

### Nuevos parámetros de sistema[](#nuevos-parametros-de-sistema "Link to this heading")

Se agregaron una serie de parámetros de sistema en esta versión que cambian el comportamiento de Qflow. Se deberá revisar el valor de cada uno de estos para verificar que todo funciona correctamente. Los parámetros son:

*   **StartFlowAsGuestLink:** formato de los vínculos a el inicio de procesos anónimos/externos. Este parámetro es único por instalación, y no se debería modificar para asegurar su funcionamiento correcto.
    
*   **GuestResponseLink:** formato de vínculo a las respuestas de tareas externas que se despachan a usuarios externos. Se agrega una instancia de este parámetro por cada espacio de trabajo, y no se debería modificar para asegurar su funcionamiento correcto.
    

### Cambios en archivos _web.config_ de sitios y backend API[](#cambios-en-archivos-web-config-de-sitios-y-backend-api "Link to this heading")

Los archivos _web.config_ de los sitios y backend API tienen cambios en sus propiedades _assemblyBinding_. Puede hacer una instalación limpia y ver los archivos instalados para ver cuales son estas propiedades.

Se agregaron nuevas configuraciones que hay que agregar al archivo _web.config_ del sitio de Qflow Task. Estas configuraciones se deben agregar bajo la sección _configuration/ appSettings_ del archivo.

*   **Configuración de exportación de tablas:** se debe incluir la siguiente configuración relacionada a la exportación de tablas en el sitio:
    
    <!-- Table export config -->
    <add key="ExportFormats" value="csv,html,excel" />
    <add key="ShowTableExportAsButtons" value="false" />
    
    La propiedad _ExportFormats_ nos deja elegir cuales son los formatos de exportacion en que se permite exportar tablas, pudiendo eliminar algunos de los valores que se muestran arriba si queremos deshabilitar la opcion de exportar en ese formato. La propiedad _ShowTableExportAsButtons_ permite configurar si las opciones de exportación se muestran como acciones separadas o agrupadas en una lista desplegable.
    
*   **Configuración de reCaptcha para inicio de procesos externos/anónimos:** se debe incluir la siguiente configuración para habilitar un desafío reCaptcha para el inicio de procesos externos/anónimos:
    
    <!-- ReCAPTCHA config -->
    <add key="ReCAPTCHASiteKey" value="" />
    <add key="ReCAPTCHASecretKey" value="" />
    <add key="ReCAPTCHAVerifyUrl" value="https://www.google.com/recaptcha/api/siteverify?secret={{0}}&amp;response={{1}}" />
    <add key="ReCAPTCHARenderUrl" value="https://www.google.com/recaptcha/api.js?onload=onReCaptchaLoad&amp;render=explicit" />
    
    Para habilitar el desafío reCaptcha, debemos completar los valores para las propiedades _ReCAPTCHASiteKey_ y _ReCAPTCHASecretKey_. Puede leer sobre cómo obtener estos valores [aquí](02-InstallationAndConfiguration.html#recaptchaconfiguration).
    

Se agrega la siguiente propiedad al archivo _system.config_, encontrado en el directorio de instalación de los backend services de Qflow, en la sección _configuration_:

> <SecurityProperties>
>     <TokenEncryptionPepper></TokenEncryptionPepper>
> </SecurityProperties>

Lo que se de como valor de esta propiedad, dentro del nodo _TokenEncryptionPepper_ se agrega a los secretos antes de encriptarlos, como una medida de seguridad extra para dificultar su desencriptación.

- - -

© Derechos de autor 2025, Urudata Software.

jQuery(function () { SphinxRtdTheme.Navigation.enable(true); }); window.dataLayer = window.dataLayer || \[\]; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-LMDS8S4B42', { 'anonymize\_ip': false, });